# Overview

This is a simple NodeJS API server that generates an OTP and emails it to the user if provided email is registered.
The OTP is valid for 5 minutes, consists of 6 digits that are generated by choosing 3 random cities, recieving current temperature(Celsius)(Integer, positive, 2 digits) for each selected city and joining the three temperatures to create the complete OTP.
The API makes use of a couple of 3rd party API's: Weatherapi for retrieving current weather and SendGrid for sending the OTP via email.
The server makes use of a MongoDB for keeping user emails and OTPs (in 2 seperate collections).
For ease of use there is a minimalistic React app that allows you to interact with the API server

# Installation

To run the project locally clone the repo, you will need to create a .env file following the .env.example

Run the command: 
``` code
npm install
 ```
To install all dependencies.

To run tests you will need to create a .env file with  MONGO_SEED_USER = 'any@email.com' so that the mocked DB will assert correctly.
After which you can run the command to run the functional(api) tests:
``` code
npm test
```
(No need to set up MongoDB or API keys for the tests as they mock the relevant parts).

If you want to run the React app and interact with the NodeJS server you will need to have a valid SendGrid API key and sender email, a weatherapi API key and a MongoDB instance.
Fill the relevant fields in the .env file (For local React instance you can fill the FRONT_DOMAIN = 'http://localhost:3000')

If you want to seed the DB to test a correct sending in case of registered user run the following command in the repository root after creating .env file with the relevant fields:
``` code
node .\seedDB\seed.js
```

Start the Server and Front:
``` code
npm start
```
(In repo root)
